/*
ç»¼åˆè€ƒè™‘ï¼ŒåæœŸæ‰“ç®—æ”¹ç”¨C++è¿›è¡Œç­”é¢˜


ğŸ§  åˆ»æ„ç»ƒä¹ æ–¹æ³•ï¼šç”±å›¾è½¬ç 
æƒ³è¦ç»ƒå‡ºâ€œå˜é‡ç›´è§‰â€ï¼Œä¸è¦ç›´æ¥å†™ä»£ç ï¼Œè¯•è¯•è¿™ä¸ªæ­¥éª¤ï¼š

ç”»å›¾ï¼šåœ¨çº¸ä¸Šç”»å‡ºé“¾è¡¨æˆ–æ•°ç»„ã€‚

ç”¨æ‰‹æŒ‡æ¨¡æ‹Ÿï¼šç”¨æ‰‹æŒ‡æŒ‡ç€å½“å‰çš„èŠ‚ç‚¹ã€‚

å¤§å£°è¯´å‡ºåŠ¨ä½œï¼š

â€œæˆ‘ç°åœ¨æŒ‡ç€ 1ã€‚â€ -> å¥½çš„ï¼Œè¿™éœ€è¦ä¸€ä¸ªæŒ‡é’ˆ currã€‚

â€œæˆ‘è¦æŠŠ 1 çš„ç®­å¤´æŒ‡å‘ 2ã€‚â€ -> 2 åœ¨å“ªï¼Ÿå“¦ï¼Œ2 æ˜¯ curr->nextã€‚

â€œç°åœ¨æˆ‘è¦æ–­å¼€ 1 å’Œ 2 çš„è¿æ¥ã€‚â€ -> ç­‰ç­‰ï¼æ–­å¼€å 2 å°±ä¸¢äº†ï¼

è§‰é†’æ—¶åˆ»ï¼šâ€œæ‰€ä»¥æˆ‘å¿…é¡»å…ˆæ‰¾ä¸ªå˜é‡ temp æŠŠ 2 æŠ“ä½ï¼â€

*/

// é“¾è¡¨èŠ‚ç‚¹çš„å®šä¹‰ï¼ˆè¿™æ˜¯ LeetCode æä¾›çš„æ ‡å‡†ç»“æ„ï¼‰
struct ListNode {
	int val;
	ListNode* next;
	ListNode() : val(0), next(nullptr) {}
	ListNode(int x) : val(x), next(nullptr) {}
	ListNode(int x, ListNode* next) : val(x), next(next) {}
};

class Solution {
public:
	ListNode* reverse(ListNode* head)
	{
		ListNode* pre=nullptr;
		ListNode* curr= head;
		while (curr != nullptr)//å¦‚æœå¤´åœ°å€å°±æ˜¯nullptrï¼Œç›´æ¥è¿”å›
		{
			ListNode* next11= curr->next;
			curr->next = pre;
			pre = curr;
			curr = next11;
		}
		return pre;
	}

	ListNode* reverseKGroup(ListNode* head, int k) {
		//1.åˆ›å»ºè™šèŠ‚ç‚¹  
		ListNode dummy(0, head);
		ListNode* pre = &dummy;
		ListNode* end = &dummy;

		while (end->next != nullptr)
		{
			// --- æ­¥éª¤ 1ï¼šåˆ†ç»„ï¼ˆè¯•æ¢æœ‰æ²¡æœ‰ k ä¸ªèŠ‚ç‚¹ï¼‰---
			for (int i = 0; i < k&& end!=nullptr; i++)
			{
				end = end->next;
			}
			if (end == nullptr)
			{
				break;
			}
			ListNode* start = pre->next;
			ListNode* nextgrouphead = end->next;
			end->next = nullptr;//æ–­å¼€

			pre->next = reverse(start);

			start->next = nextgrouphead;

			pre = start;
			end = start;


		}
		return dummy.next;

	}
};




/*è¿™æ¬¡ç­”é¢˜å‚è€ƒGeminiæä¾›çš„æ€è·¯*/
#include <iostream>

// é“¾è¡¨èŠ‚ç‚¹çš„å®šä¹‰ï¼ˆè¿™æ˜¯ LeetCode æä¾›çš„æ ‡å‡†ç»“æ„ï¼‰
struct ListNode {
    int val;
    ListNode *next;
    ListNode() : val(0), next(nullptr) {}
    ListNode(int x) : val(x), next(nullptr) {}
    ListNode(int x, ListNode *next) : val(x), next(next) {}
};

class Solution {
public:
    // è¾…å‡½æ•°ï¼šç¿»è½¬ä¸€ä¸ªé“¾è¡¨
    // è¾“å…¥ï¼š1 -> 2 -> 3
    // è¾“å‡ºï¼š3 -> 2 -> 1ï¼Œå¹¶è¿”å›æ–°çš„å¤´èŠ‚ç‚¹ 3
    ListNode* reverse(ListNode* head) {
        ListNode* pre = nullptr;
        ListNode* curr = head;
        while (curr != nullptr) {
            ListNode* next = curr->next; // æš‚å­˜ä¸‹ä¸€æ­¥
            curr->next = pre;            // ç®­å¤´åæŒ‡
            pre = curr;                  // pre å‰è¿›
            curr = next;                 // curr å‰è¿›
        }
        return pre;
    }

    // ä¸»å‡½æ•°
    ListNode* reverseKGroup(ListNode* head, int k) {
        // 1. åˆ›å»ºè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼ŒæŒ‡å‘ head
        ListNode* dummy = new ListNode(0);
        dummy->next = head;

        // pre æŒ‡é’ˆï¼šæ€»æ˜¯æŒ‡å‘â€œå½“å‰è¦å¤„ç†çš„è¿™ç»„â€çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
        // åˆšå¼€å§‹ï¼Œå®ƒæŒ‡å‘ dummy
        ListNode* pre = dummy;
        ListNode* end = dummy; // end æŒ‡é’ˆï¼šç”¨æ¥æ¢æµ‹è¿™ç»„æœ‰æ²¡æœ‰ k ä¸ªèŠ‚ç‚¹

        while (end->next != nullptr) {
            // --- æ­¥éª¤ 1ï¼šåˆ†ç»„ï¼ˆè¯•æ¢æœ‰æ²¡æœ‰ k ä¸ªèŠ‚ç‚¹ï¼‰---
            for (int i = 0; i < k && end != nullptr; i++) {
                end = end->next;
            }
            // å¦‚æœä¸è¶³ k ä¸ªï¼ˆend è·‘åˆ°äº†ç©ºï¼‰ï¼Œè¯´æ˜å‰©ä¸‹çš„ä¸ç”¨ç¿»è½¬äº†ï¼Œç›´æ¥ç»“æŸ
            if (end == nullptr) break;

            // --- æ­¥éª¤ 2ï¼šæ–­å¼€ ---
            // è®°å½•ä¸‹ä¸€ç§çš„å¼€å§‹ï¼ˆæ¯”å¦‚ 3ï¼‰
            ListNode* start = pre->next; // æœ¬ç»„çš„å¼€å§‹ï¼ˆæ¯”å¦‚ 1ï¼‰
            ListNode* nextGroup = end->next; // ä¸‹ä¸€ç»„çš„å¼€å§‹ï¼ˆæ¯”å¦‚ 3ï¼‰

            end->next = nullptr; // ã€åˆ‡æ–­ã€‘ 1->2 ä¸ 3 çš„è”ç³»ï¼Œå˜æˆç‹¬ç«‹çš„ 1->2

            // --- æ­¥éª¤ 3ï¼šç¿»è½¬ ---
            pre->next = reverse(start); // ç¿»è½¬ 1->2 å˜æˆ 2->1ï¼Œå¹¶æŠŠ dummy æ¥åˆ° 2 ä¸Š

            // --- æ­¥éª¤ 4ï¼šæ‹¼æ¥ ---
            // ç¿»è½¬åï¼Œstartï¼ˆä¹Ÿå°±æ˜¯ 1ï¼‰å˜æˆäº†è¿™ç»„çš„å°¾å·´
            // æˆ‘ä»¬è¦æŠŠ 1 é‡æ–°è¿ä¸Š nextGroupï¼ˆä¹Ÿå°±æ˜¯ 3ï¼‰
            start->next = nextGroup;

            // --- æ­¥éª¤ 5ï¼šæ¨è¿› ---
            // ç°åœ¨çš„ç»“æ„æ˜¯ dummy -> 2 -> 1 -> 3 -> 4...
            // ä¸‹ä¸€ç»„çš„å‰ä¸€ä¸ªèŠ‚ç‚¹åº”è¯¥æ˜¯ 1ï¼ˆä¹Ÿå°±æ˜¯ startï¼‰
            pre = start;
            end = pre; // é‡ç½® end æŒ‡é’ˆï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æ¢æµ‹
        }

        return dummy->next;
    }
};




